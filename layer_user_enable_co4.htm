<!DOCTYPE html>
<html lang="en-us" xml:lang="en-us">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>User Layer (Unidesk Labs)</title>
    </head>
    <body style="padding-left: 1.5em; padding-right: 1em; border-bottom-width: .5em; border-left-width: .5em; border-right-width: .5em; border-top-width: .5em; color: #000000; font-family: Arial, ' Helvetica', ' Sans Serif'; font-size: 9pt; margin-left: 0pt; text-align: left; background-color: #ffffff;">
        <div class="MCBreadcrumbsBox_0" style="border-bottom-color: #ffffff;border: 1px;border-bottom-width: 1px;border-top-width: 1px;border-left-width: 1px;border-right-width: 1px;font-size: 9pt;color: #636363;border-bottom-style: solid;padding-bottom: 10px;margin-bottom: 10px;"><span class="MCBreadcrumbsPrefix">You are here: </span><span class="MCBreadcrumbsSelf">Learn about Citrix App Layering [UnideskVersion Layering 4.0.8]</span><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbsSelf">Layer</span><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">User Layers (Unidesk Labs)</span>
        </div>
        <h1 style="clear: both;width: 85%;page-break-before: always;color: #d31245;font-size: 20px;font-weight: 500;margin-bottom: 0.40em;margin-top: 0.4em;">User Layer (Unidesk Labs)</h1>
        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;">In this article:</p>
        <table style="border-collapse: collapse; border-left-style: none; border-left-width: 0px; border-right-style: none; border-right-width: 0px; border-top-style: none; border-top-width: 0px; border-bottom-style: none; border-bottom-width: 0px; border-spacing: 1px 1px; border-spacing-x: 1px; border-spacing-y: 1px; font-size: 10pt; width: 100%; margin-left: 0; margin-right: auto;" class="TableStyle-Noborders" cellspacing="1">
            <col class="TableStyle-Noborders-Column-Column1" />
            <tbody style="color: #4d4d4d;font-size: 9pt;margin: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;margin-bottom: 0px;">
                <tr class="TableStyle-Noborders-Body-Body1" style="padding: 20px;padding-left: 40px;padding-right: 20px;padding-top: 20px;padding-bottom: 20px;">
                    <td class="TableStyle-Noborders-BodyA-Column1-Body1" style="padding-top: 0px;padding-bottom: 1px;text-align: left;vertical-align: top;padding-left: 6px;padding-right: 6px;margin-left: 0em;border-bottom-width: .5em;border-left-width: .5em;border-right-width: .5em;border-top-width: .5em;font-family: Arial, ' Helvetica', ' Sans Serif';color: #4d4d4d;font-size: 10pt;">
                        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;"><a href="#Before" class="MCXref_0 selected" style="text-decoration: underline;text-decoration-blink: false;color: #3e63b1;"> Before you start</a>
                        </p>
                        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;"><a href="#Create2" class="MCXref_0 selected" style="text-decoration: underline;text-decoration-blink: false;color: #3e63b1;"> Enable User Layers in the Layered Image</a>
                        </p>
                        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;"><a href="#Elastic" class="MCXref_0 selected" style="text-decoration: underline;text-decoration-blink: false;color: #3e63b1;"> User Layer (Unidesk Labs)</a>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;">With the Unidesk User Layer you now have the ability to persist user profile settings, data, and user-installed applications in non-persistent VDI environments. </p>
        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;">User Layers are created when:</p>
        <ul style="margin-left: 0px;padding-left: 15px;margin-top: 0.75em;">
            <li value="1" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">You set <i>Elastic Layering</i> on an Image Template to <i>Application and User Layers</i>, so that the Layered Image supports User Layers.</li>
            <li value="2" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">A user logs in to their desktop for the first time, and a User Layer is created for them. From then on, the user's data and settings are saved in the User Layer, along with any applications that the user installs locally on their desktops. </li>
        </ul>
        <h2 style="margin-bottom: .5em;margin-top: 1.750em;color: #303030;font-size: 15px;font-weight: 600;"><a name="Before"></a>Before you start</h2>
        <h3 style="margin-bottom: .5em;margin-top: 1.50em;color: #4d4d4d;font-size: 13px;font-weight: 600;">Prerequisites </h3>
        <ul style="margin-left: 0px;padding-left: 15px;margin-top: 0.75em;">
            <li value="1" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Create your <a href="layer_os_create_co4.htm" style="text-decoration: underline;text-decoration-blink: false;color: #3e63b1;">OS&#160;Layer</a>.</li>
            <li value="2" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Create your <a href="layer_platform_create_co4.htm" style="text-decoration: underline;text-decoration-blink: false;color: #3e63b1;">Platform Layer</a> for publishing, if needed.</li>
            <li value="3" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Create your <a href="layer_apps_create_co4.htm" style="text-decoration: underline;text-decoration-blink: false;color: #3e63b1;">App Layers</a>.</li>
            <li value="4" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Enough free disk space on your ELM's file share to ensure that  these additional Layers do not cause you to run out. Allow enough space for the user's locally installed apps, plus the data and configuration settings for the user's Layers.</li>
            <li value="5" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Make sure network bandwidth is adequate, as bandwidth and latency have a significant effect on the User Layer. Every write goes across the network.</li>
        </ul>
        <h3 style="margin-bottom: .5em;margin-top: 1.50em;color: #4d4d4d;font-size: 13px;font-weight: 600;">Compatibility</h3>
        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;">Currently, User Layers are supported in conjunction with the following platforms:</p>
        <ul style="margin-left: 0px;padding-left: 15px;margin-top: 0.75em;">
            <li value="1" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Operating systems: Windows 7, 64-bit </li>
            <li value="2" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Publishing platforms: VMware Horizon View and Citrix XenDesktop. </li>
        </ul>
        <h3 style="margin-bottom: .5em;margin-top: 1.50em;color: #4d4d4d;font-size: 13px;font-weight: 600;">User Layer creation process</h3>
        <ul style="margin-left: 0px;padding-left: 15px;margin-top: 0.75em;">
            <li value="1" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Enable User Layers in your Image Template:<ul style="margin-left: 0px;padding-left: 15px;"><li value="1" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Set <i>Elastic Layering</i> in the Image Template wizard on the Image Disk  tab) to <i>Application and User Layers</i>.</li><li value="2" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Publish Layered Images using the above Image Template. </li></ul></li>
            <li value="2" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">
                <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;">When a user logs on to their desktop for the first time, a User Layer is created for them.</p>
            </li>
        </ul>
        <h3 style="margin-bottom: .5em;margin-top: 1.50em;color: #4d4d4d;font-size: 13px;font-weight: 600;">User Layer size and location</h3>
        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;">The default size of a User Layer is 10 GB. </p>
        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;">User Layers are created in the <b>Users</b> folder on the ELM's network file share, for example:</p>
        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;">\\<i>MyServer</i>\<i>MyShare</i>\Users </p>
        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;">Each user will have his/her own directory within the Users directory, and it will be named as follows: </p>
        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;">Users\<i>domainIname</i>\<i>username</i>\<i>OS-Layer-ID-in-hex</i>_<i>OS-Layer-name</i>\<i>username</i>.vhd</p>
        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;">For example:</p>
        <ul style="margin-left: 0px;padding-left: 15px;margin-top: 0.75em;">
            <li value="1" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">User's login name: <b>jdoe</b> <![CDATA[ ]]></li>
            <li value="2" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">User's Domain: <b>testdomain1</b> <![CDATA[ ]]></li>
            <li value="3" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">OS layer: MyOSLayer (ID is in hexidecimal format: <i>123456</i>)</li>
            <li value="4" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">User Layer would be created in:</li>
        </ul>
        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;"> \\MyServer\MyShare\Users\testdomain1\jdoe\123456_MyOSLayer\jdoe.vhd</p>
        <h2 style="margin-bottom: .5em;margin-top: 1.750em;color: #303030;font-size: 15px;font-weight: 600;"><a name="Create2"></a>Enable User Layers in the Layered Image</h2>
        <ol style="margin-left: 2.0em;padding-left: 0px;margin-top: 0.75em;list-style-type: decimal;">
            <li value="1" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Log into the Unidesk Management Console (UMC) as an <b>Admin</b> user.</li>
            <li value="2" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Select <b>Images</b>. </li>
            <li value="3" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Select the Image Template from which you will publish the Layered Image(s), and click <b>Edit Template</b>. This opens the Edit Image Template wizard.</li>
            <li value="4" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">On the Layered Image Disk tab, set  <b>Elastic Layering</b> to <b>Application and User Layers</b>.</li>
            <li value="5" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">On the Confirm and Complete tab, click  <b>Save Template Changes</b>.</li>
            <li value="6" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Publish your Layered Images. </li>
        </ol>
        <h2 style="margin-bottom: .5em;margin-top: 1.750em;color: #303030;font-size: 15px;font-weight: 600;">Expected behavior</h2>
        <h3 style="margin-bottom: .5em;margin-top: 1.50em;color: #4d4d4d;font-size: 13px;font-weight: 600;">Considerations</h3>
        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;">Before deploying User Layers, please consider the following guidelines and limitations.</p>
        <ul style="margin-left: 0px;padding-left: 15px;margin-top: 0.75em;">
            <li value="1" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">The User Layer is delivered via the ELM's file share, therefore:<ul style="margin-left: 0px;padding-left: 15px;"><li value="1" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">If the host is disconnected from the User Layer storage, the user will have to log out and log in again to re-establish the disk mount. The user will have to wait approximately 5 minutes because the user layer will be inaccessible.</li></ul></li>
            <li value="2" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Certain enterprise applications, such as MS Office and Visual Studio should be installed in Layers, not as user-installed applications in the User Layer. In addition, the Elastic Layering limitations are applicable for User Layer. For more information on Layering limitations, please see the <a href="layer_assign_apps_elastic_co4.htm" style="text-decoration: underline;text-decoration-blink: false;color: #3e63b1;">Elastic Layering Limitations</a> section.</li>
            <li value="3" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">Windows updates must be disabled on the User Layer. </li>
            <li value="4" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">VMware Horizon View:<ul style="margin-left: 0px;padding-left: 15px;"><li value="1" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;"><p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;">View must be configured for non-persistent desktops, and the desktop <i>must</i> be set to <i>Refresh at log off</i>. Delete or refresh the machine on log off. Example:</p><p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;"><img src="Resources/Images/layer_users_remote_settings.png" style="border: none;border-bottom-style: none;border-top-style: none;border-left-style: none;border-right-style: none;padding-bottom: -0.5em;" /></p></li><li value="2" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">After logging off with View set to <i>Refresh Immediately</i>, the desktop goes into maintenance mode.  If there is only one machine in the pool, the pool will not be available until that machine has completed the refresh. </li></ul></li>
        </ul>
        <ul style="margin-left: 0px;padding-left: 15px;margin-top: 0.75em;">
            <li value="1" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">The first time a user logs into his/her desktop,  a User Layer  is created for the him/her.</li>
            <li value="2" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">If  there is problem loading the elastically assigned Layers for the user, they will still receive their User Layer. </li>
            <li value="3" style="margin-left: 0px;margin-bottom: 0.75em;margin-top: 0.75em;font-size: 13px;color: #4d4d4d;">If you rename the user in AD, a new directory and User Layer will be created for the new name. To avoid this, rename the directory on the file share and the VHD file in the directory structure to the new AD user name.</li>
        </ul>
        <p style="text-align: left; margin-top: 1.12em; margin-bottom: 0.75em; font-size: 13px; color: #4d4d4d;">&#160;</p>
    </body>
</html>